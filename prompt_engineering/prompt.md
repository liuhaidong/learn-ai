# 提示词工程（Prompt Engineering）
作为大模型时代人机交互的核心技能之一，已经发展出一系列系统化的范式与最佳实践。以下从**提示词类型范式**、**设计原则**、**实践技巧**和**自动化方向**几个维度进行系统化描述。

---

## 一、提示词工程的核心范式（Prompt Paradigms）

| 范式名称                                   | 描述                         | 应用场景        |
| -------------------------------------- | -------------------------- | ----------- |
| **指令式范式（Instructional Prompting）**     | 通过清晰地描述目标任务来指令模型完成操作       | 问答、摘要、翻译    |
| **上下文式范式（Few-shot Prompting）**         | 给出若干输入-输出示例，帮助模型掌握模式       | 分类、格式转换     |
| **链式思维范式（Chain-of-Thought Prompting）** | 引导模型“逐步思考”以增强推理能力          | 数学、逻辑、复杂推理  |
| **反向提示范式（Reversed Prompting）**         | 给出输出和部分上下文，让模型补全输入         | 训练数据生成、QA反推 |
| **系统消息范式（System Prompting）**           | 使用 system prompt 定义模型角色与行为 | 多轮对话、人格设定   |
| **树状提示范式（Tree-of-Thought Prompting）**  | 将问题分解为多个可能的思维路径，逐步探索       | 决策生成、多路径推理  |
| **自我修正范式（Reflexive Prompting）**        | 引导模型对自己的输出进行检查与改进          | 自校验问答、写作润色  |

---

## 二、提示词设计的最佳实践（Best Practices）

### 1. **明确目标**

* ✅ 明确任务类型：分类 / 回答 / 翻译 / 总结 / 生成 / 推理
* ✅ 明确输出格式（例如 JSON、Markdown、列表等）

### 2. **结构化提示**

* 使用**输入模板** + **输出模板**，提高可控性和一致性。
* 如：

  ```
  你是一个{角色}。请根据以下内容完成任务：
  内容：{input}
  任务：{任务描述}
  输出格式：{格式说明}
  ```

### 3. **角色设定**

* 指定 LLM 的“人格”或“背景”可提升输出风格与语气一致性。
* 例子：

  ```
  你是一个经验丰富的Python导师，请用简明的语言解释……
  ```

### 4. **提供上下文**

* 提供清晰背景信息和限定范围以提升准确性。
* 例如：

  * ✅ 给定领域、用途（如“医学背景下解释这个术语”）
  * ✅ 给出几个正负样例作为 few-shot

### 5. **逐步引导**

* 使用思维链或子任务分解提升复杂任务表现。
* Prompt 示例：

  ```
  第一步：分析输入中有哪些关键要素？
  第二步：判断它们之间的逻辑关系。
  第三步：生成最终结论。
  ```

### 6. **输出约束**

* 明确要求模型输出指定格式，如：

  ```
  请以JSON格式输出，包含字段：title, summary, keywords
  ```

### 7. **冗余与校验机制**

* 增加输出验证，如“请你再次检查上面的回答是否合理”
* 使用双模型机制（如 RAG 校验、辅助模型审稿）

---

## 三、高级提示词工程策略

| 技术                             | 描述                     | 场景             |
| ------------------------------ | ---------------------- | -------------- |
| Prompt Chaining                | 将多个Prompt组成链条执行，实现复杂流程 | 多阶段任务、数据预处理+生成 |
| Prompt Tuning / Soft Prompting | 将Prompt学习为向量，可调参数      | 微调LLM、更稳定      |
| Retrieval-Augmented Prompting  | 结合检索结果构建Prompt         | RAG场景，知识增强     |
| Program-aided Prompting        | 使用代码逻辑配合Prompt，提高精度    | 数学计算、数据处理      |

---

## 四、提示词工程常见错误与优化建议

| 误区         | 优化建议         |
| ---------- | ------------ |
| 提示太模糊      | 添加示例、明确输出格式  |
| 一次性生成长输出失败 | 分段生成、多轮问答    |
| 输出风格不统一    | 明确角色、指定语气    |
| 长上下文丢失信息   | 分块嵌入、RAG配合使用 |

---

## 五、自动化与系统化建议

* **提示词管理平台**：如 LangChain PromptTemplate、Prompt Layer、LlamaIndex Prompt Registry。
* **版本控制与A/B测试**：维护不同版本的Prompt，记录效果变化。
* **提示词评估指标**：

  * 精度、格式一致性、语义覆盖度、用户满意度等。
* **提示词自动优化工具**：

  * LLM-as-a-Judge、Reflexion、自我调优Loop。

---
