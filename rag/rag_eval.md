æ˜ç™½äº†ã€‚æˆ‘å°†ä¸ºä½ ç³»ç»Ÿæ€§æ¢³ç†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¯„ä¼°å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åŠå…¶é©±åŠ¨çš„å¯¹è¯ä»£ç†ï¼ˆagentï¼‰çš„æœ€ä½³å®è·µå’Œæ¡†æ¶ï¼Œæ¶µç›–ä»¥ä¸‹ç»´åº¦ï¼š

* äº¤äº’è´¨é‡ï¼ˆå¦‚è¯­è¨€æµç•…æ€§ã€å‡†ç¡®æ€§ã€ä¸Šä¸‹æ–‡ä¿æŒï¼‰
* é²æ£’æ€§ï¼ˆå¯¹è¾¹ç•Œè¾“å…¥ã€è¯¯è§£å®¹å¿çš„èƒ½åŠ›ï¼‰
* å®‰å…¨æ€§ï¼ˆå¯¹æŠ—æ¯’æ€§å†…å®¹ã€éšç§æ³„éœ²ã€è¶Šæƒè®¿é—®ç­‰ï¼‰
* ä¸šåŠ¡æŒ‡æ ‡è¡¨ç°ï¼ˆå¦‚å®¢æœè½¬åŒ–ç‡ã€æ¨èç‚¹å‡»ç‡ã€æœç´¢æ»¡æ„åº¦ç­‰ï¼‰

å¹¶å°†é’ˆå¯¹å®¢æœã€æœç´¢ã€æ¨èã€æ•™è‚²ç­‰å…¸å‹åœºæ™¯ï¼Œæ•´ç†è¡Œä¸šä¸­çš„ä¸»æµæ–¹æ³•ã€ç³»ç»Ÿæ€§è¯„ä¼°æ¡†æ¶ï¼ˆå¦‚OpenAI Evalsã€DeepEvalã€RAGASç­‰ï¼‰ã€å…³é”®æŒ‡æ ‡ã€è¯„ä¼°å·¥å…·é“¾åŠä¼ä¸šå®è·µæ¡ˆä¾‹ã€‚

æˆ‘ä¼šå°½å¿«æ•´ç†å¥½å¹¶å‘ä½ æ±‡æŠ¥ã€‚


# äº¤äº’è´¨é‡

* **è¯­è¨€è‡ªç„¶åº¦ä¸å¯è¯»æ€§**ï¼šè¯„ä¼°æ¨¡å‹è¾“å‡ºæ˜¯å¦é€šé¡ºã€è¯­æ³•æ­£ç¡®ã€ä¸ä¸Šä¸‹æ–‡è¿è´¯ã€‚å¸¸ç”¨è‡ªåŠ¨æŒ‡æ ‡åŒ…æ‹¬å›°æƒ‘åº¦ (perplexity) æˆ–è€…åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„è¯„åˆ†ï¼ˆå¦‚GPTScoreï¼‰ç­‰ï¼›äººå·¥è¯„ä¼°å¯é‡‡ç”¨æµç•…åº¦ï¼ˆfluencyï¼‰ã€è¿è´¯æ€§ç­‰ç»´åº¦çš„ Likert é‡è¡¨å¯¹è¯è´¨é‡æ‰“åˆ†ã€‚
* **äº‹å®å‡†ç¡®æ€§**ï¼šæ£€æŸ¥ç”Ÿæˆå†…å®¹çš„çœŸå®æ€§ä¸çŸ¥è¯†æ­£ç¡®æ€§ã€‚å¯ä»¥ä½¿ç”¨äº‹å®æ ¸æŸ¥ä»»åŠ¡ (å¦‚ TruthfulQA) æˆ–æŸ¥è¯¢åŸºå‡†ï¼ˆå¦‚çŸ¥è¯†é—®ç­”æ•°æ®é›†ï¼‰å¯¹ç…§æ¨¡å‹å›ç­”ã€‚Anthropic å»ºè®®é‡‡ç”¨æ˜ç¡®é‡åŒ–æŒ‡æ ‡ï¼Œä¾‹å¦‚ä»»åŠ¡ç›¸å…³çš„ F1 æˆ– BLEU åˆ†æ•°ï¼Œä»¥åŠæ•´ä½“å‡†ç¡®ç‡ã€‚
* **ä¸Šä¸‹æ–‡ä¿æŒèƒ½åŠ›**ï¼šè¡¡é‡æ¨¡å‹åœ¨å¤šè½®å¯¹è¯ä¸­ä¿æŒä¿¡æ¯ä¸€è‡´æ€§çš„èƒ½åŠ›ï¼Œå¦‚å¯¹å·²ç»™å‡ºçš„å†…å®¹æ˜¯å¦è¿ç»­å¼•ç”¨ã€é¿å…å‰åçŸ›ç›¾ã€‚å¯é€šè¿‡è®¾è®¡è¿è´¯æ€§æµ‹è¯•ç”¨ä¾‹æˆ–ä½¿ç”¨ä¸“é—¨çš„ä¸Šä¸‹æ–‡ä¸€è‡´æ€§è¯„ä¼°ä»»åŠ¡æ¥æ£€æµ‹ã€‚
* **ç”¨æˆ·æ»¡æ„åº¦**ï¼šç»“åˆå®šæ€§å’Œå®šé‡æŒ‡æ ‡è¡¡é‡æœ€ç»ˆç”¨æˆ·ä½“éªŒã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ç”¨æˆ·è°ƒæŸ¥ï¼ˆCSAT/NPSï¼‰æˆ–éšå¼è¡Œä¸ºï¼ˆå¯¹è¯å®Œæˆç‡ã€åç»­äº’åŠ¨æ¬¡æ•°ï¼‰æ¥è¯„ä¼°ç”¨æˆ·çš„æ»¡æ„åº¦å’Œå¿ è¯šåº¦ã€‚Reimann ç­‰äººæå‡ºï¼Œå°†ä»»åŠ¡å®Œæˆç‡ä¸å¯¹è¯è´¨é‡ï¼ˆå¯ç”¨æ€§ã€å–œæ¬¢åº¦ç­‰ï¼‰ç»“åˆï¼Œæ˜¯è¯„ä¼°å¯¹è¯ä»£ç†æ•ˆæœçš„å¸¸ç”¨æ–¹æ³•ã€‚
* **è¯„ä¼°æ–¹æ³•**ï¼šç»¼åˆä½¿ç”¨äººå·¥è¯„ä¼°ä¸è‡ªåŠ¨åŒ–æŒ‡æ ‡ã€‚äººå·¥è¯„ä¼°ï¼ˆä¸“å®¶æ‰“åˆ†æˆ–ä¼—åŒ…è¯„æµ‹ï¼‰æ˜¯æ£€æµ‹è‡ªç„¶åº¦å’Œç›¸å…³æ€§çš„é‡è¦æ‰‹æ®µï¼Œè‡ªåŠ¨æŒ‡æ ‡ï¼ˆå¦‚BERTScoreã€BLEUã€ROUGEç­‰ï¼‰å¯å¿«é€Ÿå¯¹æ¯”ä¸åŒæ¨¡å‹è¡¨ç°ã€‚Anthropic æå€¡ç»“åˆA/Bæµ‹è¯•ä¸ç”¨æˆ·åé¦ˆè¿›è¡Œé‡åŒ–è¯„ä¼°ï¼Œç¡®ä¿æ€§èƒ½æ”¹è¿›åœ¨çœŸå®åœºæ™¯ä¸­æœ‰æ•ˆã€‚

## é²æ£’æ€§

* **è¾¹ç•Œå’Œå¼‚å¸¸è¾“å…¥æµ‹è¯•**ï¼šä¸»åŠ¨è®¾è®¡è¾¹ç¼˜æƒ…å†µæ¥è€ƒéªŒæ¨¡å‹ç¨³å®šæ€§ã€‚Anthropic å»ºè®®åœ¨è¯„ä¼°ä¸­åŠ å…¥æ— å…³è¾“å…¥ã€è¶…é•¿æ–‡æœ¬ã€å«æ··ä¸æ¸…çš„è¯·æ±‚ç­‰ç”¨ä¾‹ï¼Œä»¥éªŒè¯æ¨¡å‹èƒ½å¦ç¨³å¥åº”å¯¹éæ ‡å‡†è¾“å…¥ã€‚
* **å¯¹æŠ—æ€§æ”»å‡»æµ‹è¯•**ï¼šä½¿ç”¨æ¨¡æ‹Ÿçš„æ¶æ„æç¤ºï¼ˆå¦‚æ³¨å…¥å¼æ”»å‡»ã€ä»»åŠ¡é‡ç½®ã€è§’è‰²ç¯¡æ”¹ç­‰ï¼‰è¯„ä¼°æ¨¡å‹æ˜“å—å¹²æ‰°ç¨‹åº¦ã€‚å¦‚ä¸šç•Œå¸¸ç”¨çš„ OWASP LLM é¡¶çº§é£é™©åˆ—è¡¨å°±å°†â€œPrompt æ³¨å…¥â€ã€â€œæ•æ„Ÿä¿¡æ¯æ³„éœ²â€ç­‰åˆ—ä¸ºå…³é”®æ¼æ´ã€‚å¯åˆ©ç”¨ä¸“é—¨çš„çº¢é˜Ÿå·¥å…·ï¼ˆå¦‚ Promptfooã€DeepTeam ç­‰ï¼‰å¯¹æ¨¡å‹è¿›è¡Œå¤§è§„æ¨¡å¯¹æŠ—æµ‹è¯•ï¼Œæ£€æŸ¥å…¶åœ¨æ¶æ„è¾“å…¥ä¸‹æ˜¯å¦ä¼šå‘ç”ŸåŠŸèƒ½æ··æ·†æˆ–æ•æ„Ÿæ•°æ®æ³„æ¼ã€‚
* **ç¨³å¥æ€§æŒ‡æ ‡**ï¼šå¯¹åŒä¸€é—®é¢˜ç”¨å¤šç§è¡¨è¿°è¿›è¡Œæµ‹è¯•ï¼Œæ£€æŸ¥æ¨¡å‹è¾“å‡ºçš„ä¸€è‡´æ€§ï¼›ç»Ÿè®¡å¼‚å¸¸è¾“å…¥ä¸‹çš„å¤±è´¥ç‡ï¼ˆå¦‚å´©æºƒã€è¶…æ—¶æˆ–ç»™å‡ºç©ºç™½å›ç­”çš„æ¯”ä¾‹ï¼‰ã€‚åŒæ—¶ç›‘æ§æ¨¡å‹å¯¹é•¿å°¾å’Œè·¨é¢†åŸŸåœºæ™¯çš„è¡¨ç°ï¼Œç¡®ä¿æ¨¡å‹åœ¨æœªè§è¿‡çš„è¾“å…¥ä¸Šä¸ä¼šçªç„¶æ€§èƒ½æš´è·Œã€‚

## å®‰å…¨æ€§

* **æœ‰å®³å†…å®¹æ£€æµ‹**ï¼šè¯„ä¼°å¹¶é˜²æ­¢æ¨¡å‹è¾“å‡ºä»‡æ¨ã€æ­§è§†ã€æš´åŠ›ç­‰æœ‰å®³ä¿¡æ¯ã€‚å¸¸ç”¨æ–¹æ³•åŒ…æ‹¬ï¼šä½¿ç”¨ä¸“ä¸šçš„æ¯’æ€§æ£€æµ‹å™¨ï¼ˆå¦‚Google Perspectiveï¼‰å¯¹æ¨¡å‹è¾“å‡ºæ‰“åˆ†ï¼›æˆ–é¢„è®­ç»ƒ**å®‰å…¨åˆ†ç±»å™¨**å®¡æ ¸è¾“å‡ºã€‚TruLens ç­‰å·¥å…·å†…ç½®â€œæœ‰å®³/æœ‰æ¯’è¯­è¨€â€åé¦ˆå‡½æ•°ï¼Œå¯è‡ªåŠ¨æ£€æµ‹å¹¶é‡åŒ–æ–‡æœ¬ä¸­çš„å†’çŠ¯æ€§æˆåˆ†ã€‚
* **æç¤ºæ³¨å…¥æ”»å‡»é˜²æŠ¤**ï¼šæµ‹è¯•æ¨¡å‹åœ¨é¢å¯¹æ¶æ„æç¤ºæ—¶èƒ½å¦ä¿æŒç­–ç•¥ï¼ˆæ¯”å¦‚ç³»ç»Ÿæç¤ºï¼‰ä¸è¢«è¦†å†™ã€‚é€šè¿‡æ„é€ åŒ…å«â€œå¿½ç•¥å‰é¢ä¸€åˆ‡æŒ‡ä»¤â€çš„è¯±å¯¼è¯­ï¼Œæ£€æŸ¥æ¨¡å‹æ˜¯å¦ä¼šæ³„éœ²å†…éƒ¨è§„åˆ™æˆ–æ‰§è¡Œä¸å½“æ“ä½œã€‚OWASP LLM é£é™©æ¸…å•æé†’ï¼Œè¿™æ˜¯å¸¸è§æ”»å‡»é¢ã€‚Promptfoo çš„çº¢é˜Ÿæ¨¡å—æŒ‡å‡ºï¼ŒOpenAIã€Anthropicã€Microsoft ç­‰å®éªŒå®¤éƒ½åœ¨æ¨¡å‹å‘å¸ƒå‰ä½¿ç”¨ç³»ç»ŸåŒ–çš„çº¢é˜Ÿæµ‹è¯•æ¥å‘ç°æ­¤ç±»æ¼æ´ã€‚
* **æƒé™ä¸éšç§ä¿æŠ¤**ï¼šç¡®è®¤æ¨¡å‹ä¸ä¼šæ³„éœ²è®­ç»ƒé›†ä¸­çš„ç§äººä¿¡æ¯æˆ–è¶…å‡ºæƒé™è®¿é—®å¤–éƒ¨ç³»ç»Ÿã€‚åœ¨è¯„ä¼°ä¸­å¯æ’å…¥å«æœ‰æ•æ„Ÿä¿¡æ¯çš„æŸ¥è¯¢ï¼ŒéªŒè¯æ¨¡å‹æ˜¯å¦ä¼šä¸å½“è¾“å‡ºæˆ–å†™å…¥æ—¥å¿—ã€‚å¯¹æœ‰å·¥å…·è°ƒç”¨èƒ½åŠ›çš„Agentï¼Œéœ€è¦è¯„ä¼°å…¶å¯¹ API è°ƒç”¨çš„æƒé™è¾¹ç•Œï¼Œå¦‚æ˜¯å¦ä¼šæ‰§è¡Œæœªæˆæƒæ“ä½œã€‚
* **æ¨¡å‹åè§å’Œé²è½è¡Œä¸º**ï¼šç›‘æµ‹å¹¶è¯„ä¼°æ¨¡å‹æ½œåœ¨çš„åè§ï¼ˆå¦‚æ€§åˆ«ã€ç§æ—æ­§è§†ï¼‰æˆ–é²è½æ‰©æ•£ï¼ˆfabricated contentï¼‰ã€‚å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„åè§æµ‹è¯•é›†æˆ–ç”Ÿæˆæ¶åŠ£ç¤¾æƒ…æ™¯ï¼Œæ£€æŸ¥æ¨¡å‹ç­”å¤æ˜¯å¦å­˜åœ¨ç³»ç»Ÿæ€§åå·®ã€‚å¤šç»´å®‰å…¨æµ‹è¯•ï¼ˆæ¯’æ€§ã€åè§ã€è¯¯å¯¼å†…å®¹ç­‰ï¼‰å¾€å¾€éœ€è¦ç»“åˆæ‰‹å·¥å’Œè‡ªåŠ¨åŒ–è¯„ä¼°ï¼Œå…±åŒç¡®ä¿è¾“å‡ºå®‰å…¨æ€§ã€‚

## ä¸šåŠ¡æŒ‡æ ‡ä¸A/Bæµ‹è¯•

* **å®¢æœåœºæ™¯**ï¼šå¸¸ç”¨KPIåŒ…æ‹¬**é¦–é—®è§£å†³ç‡ (FCR)** å’Œ **é¦–å›å“åº”æ—¶é—´ (FRT)**ã€‚FCR è¡¨ç¤ºä¸€æ¬¡å¯¹è¯ä¸­é—®é¢˜è¢«è§£å†³çš„æ¯”ä¾‹ï¼ŒFRT è¡¡é‡å®¢æœé¦–æ¬¡å›å¤ç”¨æˆ·çš„é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œå¹³å‡å¤„ç†æ—¶é•¿ã€å®¢æˆ·æ»¡æ„åº¦ï¼ˆCSAT/NPSï¼‰ç­‰æŒ‡æ ‡ä¹Ÿæ˜¯å…³é”®æ€§èƒ½å‚æ•°ã€‚é€šè¿‡A/Bæµ‹è¯•ï¼Œå¯ä»¥æ¯”è¾ƒå¼•å…¥æ–°æ¨¡å‹æˆ–ç­–ç•¥å‰åçš„è¿™äº›æŒ‡æ ‡å˜åŒ–ï¼Œè¯„ä¼°å…¶å¯¹ç”¨æˆ·ä½“éªŒçš„å®é™…å½±å“ã€‚
* **æœç´¢åœºæ™¯**ï¼šå¸¸ç”¨**ç‚¹å‡»ç‡ (CTR)**ã€å‘½ä¸­ç‡ç­‰è¡¡é‡æœç´¢ç›¸å…³æ€§çš„æŒ‡æ ‡ã€‚CTR åæ˜ ç”¨æˆ·å¯¹è¿”å›ç»“æœçš„å…´è¶£ï¼ˆé¡¶çº§ç»“æœçš„ç‚¹å‡»æ¯”ç‡ï¼‰ï¼Œè·³å‡ºç‡å’Œä¼šè¯æŒç»­æ—¶é•¿ç­‰åˆ™æç¤ºç»“æœè´¨é‡ã€‚æœç´¢ç³»ç»Ÿè¿˜éœ€ç›‘æ§**æ€§èƒ½æŒ‡æ ‡**ï¼šåŒ…æ‹¬æŸ¥è¯¢å»¶è¿Ÿã€ååé‡ã€é”™è¯¯ç‡å’Œå¯ç”¨æ€§ç­‰ã€‚A/Bæµ‹è¯•é€šå¸¸æ¯”è¾ƒä¸åŒæ’åç®—æ³•ä¸‹çš„CTRã€å¹³å‡ç‚¹å‡»ä½ç½®å’Œç”¨æˆ·ç•™å­˜å·®å¼‚ï¼Œä»¥éªŒè¯æœç´¢ä½“éªŒçš„æå‡ã€‚
* **æ¨èåœºæ™¯**ï¼šå…³é”®æŒ‡æ ‡æœ‰æ¨è**ç‚¹å‡»ç‡ (CTR)**å’Œ**è½¬åŒ–ç‡**ã€‚CTR è¡¡é‡æ¨èå†…å®¹å¸å¼•ç”¨æˆ·ç‚¹å‡»çš„æ•ˆæœï¼Œè½¬åŒ–ç‡ï¼ˆå¦‚ç‚¹å‡»åè´­ä¹°/æ’­æ”¾çš„æ¯”ä¾‹ï¼‰åˆ™ç›´æ¥å…³è”ä¸šåŠ¡ä»·å€¼ã€‚è¿˜å¯ç»Ÿè®¡ç”¨æˆ·ä¼šè¯é•¿åº¦ã€è·³å‡ºç‡ç­‰å‚ä¸åº¦æŒ‡æ ‡ã€‚ä¸æœç´¢ç±»ä¼¼ï¼ŒA/Bæµ‹è¯•ç”¨æ¥æ¯”è¾ƒä¸åŒæ¨èç®—æ³•æˆ–ç•Œé¢å˜æ›´å¯¹è¿™äº›ä¸šåŠ¡æŒ‡æ ‡çš„å½±å“ã€‚
* **æ•™è‚²åœºæ™¯**ï¼šè¯„ä¼°**å­¦ä¹ æ•ˆæœ**ï¼ˆå¦‚æµ‹è¯•æˆç»©æå‡ã€ç­”é¢˜æ­£ç¡®ç‡ï¼‰å’Œ**å‚ä¸åº¦**ï¼ˆå¦‚å­¦ä¹ æ—¶é•¿ã€å®Œæˆç‡ï¼‰ã€‚åœ¨AIè¾…å¯¼ç³»ç»Ÿä¸­ï¼Œç ”ç©¶è€…å¾€å¾€è®¾è®¡ä¸“é—¨çš„æ•™å­¦è¯„ä»·é‡è¡¨ï¼ˆrubricï¼‰ï¼Œç”±ä¸“å®¶æˆ–LLMå¯¹å¯¹è¯å†…å®¹è¿›è¡Œæ‰“åˆ†ï¼›ä¹Ÿå¯ä½¿ç”¨çŸ¥è¯†è¿½è¸ªæ¨¡å‹é¢„æµ‹å­¦ç”Ÿä¸‹ä¸€ä¸ªç­”é¢˜æ­£ç¡®ç‡ã€‚é€šè¿‡è¿™äº›æŒ‡æ ‡è¯„ä¼°æ¨¡å‹åœ¨ä¸ªæ€§åŒ–æ•™å­¦ä¸Šçš„æ•ˆæœï¼ŒåŒæ—¶è¿›è¡ŒA/Bæµ‹è¯•æ¥éªŒè¯ä¸åŒè¾…å¯¼ç­–ç•¥å¯¹å­¦ä¹ æˆæœçš„æå‡ã€‚

## ä¸»æµè¯„ä¼°æ¡†æ¶ä¸å·¥å…·é“¾

| æ¡†æ¶/å·¥å…·                | é€‚ç”¨åœºæ™¯ä¸åŠŸèƒ½                                    | ä¸»è¦ç‰¹ç‚¹                                                                                                 | å¼€æº/å•†ä¸š            |
| -------------------- | ------------------------------------------ | ---------------------------------------------------------------------------------------------------- | ---------------- |
| **OpenAI Evals**     | é€šç”¨ LLM å’Œ LLM ç³»ç»Ÿè¯„ä¼°æ¡†æ¶ã€‚æä¾›**é¢„å®šä¹‰è¯„ä¼°é›†**ï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰ä»»åŠ¡ã€‚ | æ”¯æŒå¤šç§è¯„æµ‹ç»´åº¦ï¼ˆé—®ç­”ã€å¯¹è¯ç­‰ï¼‰ï¼›å¯ç¼–å†™è‡ªå·±çš„è¯„æµ‹ç”¨ä¾‹ï¼›å®˜æ–¹ç»´æŠ¤ï¼Œæ˜“é›†æˆOpenAI APIã€‚                                                      | å¼€æºï¼ˆGitHubï¼‰       |
| **DeepEval**         | é¢å‘ RAG/LLM åº”ç”¨çš„æµ‹è¯•æ¡†æ¶ã€‚ä»¥**å•å…ƒæµ‹è¯•**æ–¹å¼ç»„ç»‡è¯„ä¼°ã€‚        | å†…ç½®å¤šç§æŒ‡æ ‡ï¼ˆå¦‚G-Evalã€Faithfulnessã€Hallucinationã€Biasç­‰ï¼‰ï¼›å¯ä¸PyTesté›†æˆï¼›æ”¯æŒç”Ÿæˆsynthetic datasetï¼›æ—¢æœ‰Pythonåº“ä¹Ÿæä¾›åœ¨çº¿ä»ªè¡¨ç›˜ã€‚ | å¼€æºï¼ˆConfident AIï¼‰ |
| **RAGAS**            | é’ˆå¯¹æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) çš„è¯„ä¼°å·¥å…·ã€‚                      | å®šä¹‰5ä¸ªæ ¸å¿ƒæŒ‡æ ‡ï¼ˆå¯ä¿¡åº¦ã€ä¸Šä¸‹æ–‡ç›¸å…³åº¦ã€ç­”æ¡ˆç›¸å…³åº¦ã€å¬å›ç‡ã€ç²¾ç¡®ç‡ï¼‰ï¼›æ¥å£ç®€å•ï¼Œæ˜“äºé›†æˆRAGæµç¨‹ã€‚                                                   | å¼€æº               |
| **TruLens**          | LLM åº”ç”¨è¯„ä¼°å¹³å°ã€‚é€šè¿‡**åé¦ˆå‡½æ•°**å¯¹åº”ç”¨è¿›è¡Œè´¨é‡æ£€æµ‹ã€‚            | æä¾›å¤šç§åé¦ˆå‡½æ•°ï¼ˆä¸Šä¸‹æ–‡ç›¸å…³æ€§ã€ç­”æ¡ˆå®Œæ•´åº¦ã€æ¯’æ€§æ£€æŸ¥ã€æƒ…æ„Ÿåˆ†æç­‰ï¼‰ï¼›æ”¯æŒç”Ÿæˆå¼QAã€æ‘˜è¦ã€å·¥å…·è°ƒç”¨ç­‰åœºæ™¯ï¼›å¯ç¼–ç¨‹åŒ–å¿«é€Ÿå®šä½é—®é¢˜ã€‚                                     | å¼€æºï¼ˆTrueraï¼‰       |
| **Promptfoo**        | ä¸“æ³¨äº Prompt å’Œå¯¹è¯åº”ç”¨çš„æµ‹è¯•æ¡†æ¶ã€‚                     | å…è®¸å¯¹æç¤ºæ¨¡æ¿ã€æ¨¡å‹å’ŒRAGè®¾ç½®è¿›è¡Œ**æµ‹è¯•é©±åŠ¨å¼€å‘**ï¼šé¢„å®šä¹‰æµ‹è¯•ç”¨ä¾‹ã€å¹¶è¡Œæ¯”è¾ƒä¸åŒæ¨¡å‹è¾“å‡ºã€ç»“æœæ‰“åˆ†å’Œç¼“å­˜ï¼›æ”¯æŒå¤šç§LLM APIï¼›CLI å’Œ Python åº“å½¢å¼å‡å¯ä½¿ç”¨ã€‚            | å¼€æº               |
| **HumanEval**        | OpenAIå‘å¸ƒçš„**ä»£ç ç”Ÿæˆ**åŸºå‡†æ•°æ®é›†ã€‚                    | åŒ…å«164ä¸ªç¼–ç¨‹ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¸¦æœ‰å‡½æ•°ç­¾åã€æè¿°å’Œå•å…ƒæµ‹è¯•ï¼›å¸¸ç”¨äºè®¡ç®—ç”Ÿæˆä»£ç çš„æ­£ç¡®ç‡ï¼ˆpass\@kï¼‰ã€‚                                                | å¼€æºï¼ˆæ•°æ®é›†ï¼‰          |
| **HELM**             | Stanford CRFM æå‡ºçš„**æ•´ä½“è¯„ä¼°**æ¡†æ¶ï¼Œç”¨äºåŸºç¡€æ¨¡å‹å¯¹æ¯”ã€‚      | é›†æˆå¤šç§æ ‡å‡†æ•°æ®é›†ä¸åŸºå‡†ï¼ˆå¦‚MMLUã€GPQAç­‰ï¼‰ï¼›ç»Ÿä¸€æ¥å£è°ƒç”¨ä¸åŒå‚å•†æ¨¡å‹ï¼›æŒ‡æ ‡æ¶µç›–å‡†ç¡®ç‡ã€æ•ˆç‡ã€åè§ã€æ¯’æ€§ç­‰ï¼›æä¾›Webç•Œé¢å’Œæ’è¡Œæ¦œã€‚                                | å¼€æº               |
| **Deepchecks (LLM)** | ç”¨äºç›‘æ§å’ŒéªŒè¯LLMçš„å·¥å…·ã€‚                             | å¼ºè°ƒå¯è§†åŒ–ä»ªè¡¨ç›˜å±•ç¤ºè¯„ä¼°ç»“æœï¼Œæ”¯æŒè‡ªåŠ¨åŒ–å›å½’æµ‹è¯•ï¼›é’ˆå¯¹æ¨¡å‹æœ¬èº«è¿›è¡Œå…¨é¢è¯Šæ–­ã€‚                                                               | å¼€æº/å•†ä¸šå¯é€‰          |
| **Arize AI Phoenix** | ä¼ä¸šçº§è§‚æµ‹å¹³å°çš„è¯„ä¼°ç»„ä»¶ã€‚                              | å†…ç½®ã€Œé—®ç­”æ­£ç¡®æ€§ã€å¹»è§‰ç‡ã€æ¯’æ€§ã€ä¸‰ç§è¯„ä¼°æŒ‡æ ‡ï¼›æ“…é•¿ç”Ÿäº§ç¯å¢ƒç›‘æµ‹å’Œå‘Šè­¦ã€‚                                                                  | å•†ä¸šï¼ˆArize AIï¼‰     |

**å„æ¡†æ¶ä¼˜åŠ£å¯¹æ¯”**ï¼šä¾‹å¦‚ï¼ŒOpenAI Evalsçµæ´»ä¸”ç¤¾åŒºæ”¯æŒå¥½ï¼Œä½†å¤šèšç„¦OpenAIæ¥å£ï¼›DeepEval/RAGASä¸“ä¸šäºRAGç³»ç»Ÿï¼Œå¤šæŒ‡æ ‡ç»†ç²’åº¦è¯„ä¼°ï¼›TruLensè¦†ç›–å…¨é¢ï¼Œå¯è‡ªå®šä¹‰åé¦ˆå‡½æ•°ï¼›Promptfooé€‚åˆå¼€å‘æµç¨‹å†…çš„å¿«é€Ÿæµ‹è¯•ï¼›HELMé€‚ç”¨äºç ”ç©¶çº§åˆ«çš„å¤§è§„æ¨¡å¯¹æ¯”ï¼›HumanEvalä»…é€‚ç”¨äºä»£ç ä»»åŠ¡ï¼›Deepcheckså’ŒArizeç­‰å·¥å…·é‡è§†ç›‘æ§ä¸å¯è§†åŒ–ï¼Œä½†æŒ‡æ ‡ç›¸å¯¹å›ºå®šæˆ–éœ€ä»˜è´¹ã€‚

## ä¼ä¸šå®è·µæ¡ˆä¾‹

* **Google Cloud**ï¼šæ¨å‡ºäº†Vertex AI GenAIè¯„ä¼°æœåŠ¡ï¼Œä¸ºç”¨æˆ·æä¾›äº¤äº’å¼å’Œç¦»çº¿è¯„ä¼°å·¥å…·ã€‚è¯¥æœåŠ¡åŒ…å«ä¸€ç³»åˆ—â€œ**è´¨é‡å¯æ§ä¸”å¯è§£é‡Š**â€çš„è¯„ä¼°å™¨ï¼Œæ”¯æŒåœ¨å¼€å‘å…¨æµç¨‹ä¸­æ¯”è¾ƒæ¨¡å‹ã€ä¼˜åŒ–Promptå¹¶æŒç»­ç›‘æ§ã€‚æ–‡ä¸­æåˆ°æ„å¤§åˆ©ä¿é™©å…¬å¸Generaliä½¿ç”¨è¯¥è¯„ä¼°æœåŠ¡å°†åŸºäºRAGçš„é—®ç­”ç³»ç»Ÿä¸Šçº¿ç”Ÿäº§ï¼Œè¯´æ˜å¤§è§„æ¨¡å•†ä¸šç¯å¢ƒä¸­è¯„ä¼°å·¥å…·çš„å¯è¡Œæ€§ã€‚
* **Anthropic**ï¼šå…¶å¼€å‘è€…æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†è¯„ä¼°æ–¹æ³•è®ºã€‚æ¯”å¦‚æå‡ºå¥½çš„è¯„ä¼°æ ‡å‡†åº”å½“å…·ä½“å¯é‡åŒ–ï¼ˆå¦‚ä»»åŠ¡å‡†ç¡®ç‡ã€å“åº”æ—¶é—´ç­‰ï¼‰ã€åŒ…æ‹¬è¾¹ç•Œæƒ…å†µï¼Œå¹¶å°½é‡è‡ªåŠ¨åŒ–è¯„åˆ†ã€‚è¿™äº›æŒ‡å¯¼åŸåˆ™åæ˜ äº†Anthropicåœ¨ç”Ÿäº§åº”ç”¨ä¸­é‡è§†**ä»»åŠ¡ä¸€è‡´æ€§ã€é‡åŒ–æŒ‡æ ‡å’Œè§„æ¨¡åŒ–æµ‹è¯•**çš„å®è·µã€‚
* **OpenAI**ï¼šåœ¨å‘å¸ƒGPT-4å‰è¿›è¡Œäº†é•¿æ—¶é—´çš„å¯¹æŠ—å¼è¯„ä¼°å’Œç”¨æˆ·åé¦ˆå¾ªç¯ï¼ˆå¦‚ChatGPTä¸Šçš„ä½¿ç”¨åé¦ˆï¼‰ï¼Œä¸æ–­è¿­ä»£æ¨¡å‹å¯¹é½ã€‚ä¸ºæ–¹ä¾¿ç¤¾åŒºå¤ç”¨ï¼Œä»–ä»¬è¿˜å¼€æºäº† Evals æ¡†æ¶ï¼Œä½¿å¾—ä¼ä¸šå’Œç ”ç©¶è€…å¯ä»¥åŸºäºåŒä¸€å·¥å…·æ„å»ºè‡ªå®šä¹‰è¯„æµ‹ã€‚
* **Meta/Facebook**ï¼šå…¬å¼€ä¿¡æ¯æœ‰é™ï¼Œä½†å…¶å¯¹è¯æ¨¡å‹ï¼ˆå¦‚BlenderBotï¼‰å¼ºè°ƒé€šè¿‡å¤§é‡çœŸå®ç”¨æˆ·å¯¹è¯å’Œç¦»çº¿è¯„æµ‹æ¥æŒç»­æ”¹è¿›æ¨¡å‹ï¼ŒåŒ…æ‹¬åŸºäºç”¨æˆ·è¯„åˆ†å’Œå¯¹è¯æ—¥å¿—çš„è´¨é‡åˆ†æã€‚Meta çš„ç ”ç©¶å¸¸ä½¿ç”¨äººç±»æ‰“åˆ†å’Œè‡ªåŠ¨æŒ‡æ ‡å…±åŒè¯„ä¼°æ¨¡å‹åœ¨ä¸åŒå¯¹è¯ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼Œé‡è§†ä¸€è‡´æ€§å’Œç”¨æˆ·ä½“éªŒã€‚
* **Microsoft**ï¼šè™½ç„¶æœªå…¬å¼€ä¸“é—¨æ¡†æ¶ï¼Œå¾®è½¯åœ¨Azure AIå’ŒCopilotç­‰äº§å“ä¸­åŒæ ·åº”ç”¨A/Bæµ‹è¯•å’Œå®æ—¶ç›‘æ§ã€‚ä¸šç•ŒæŠ¥é“Promptfooæåˆ°ï¼ŒMicrosoftï¼ˆä»¥åŠOpenAIã€Googleç­‰ï¼‰éƒ½ä½¿ç”¨çº¢é˜Ÿæµ‹è¯•æ¥ç¡®ä¿æ¨¡å‹å®‰å…¨ã€‚å¯æ¨æµ‹å¾®è½¯å†…éƒ¨ä¹Ÿä¼šç»“åˆæœåŠ¡çº§SLAæŒ‡æ ‡ï¼ˆå¦‚å¯ç”¨æ€§ã€å“åº”æ—¶å»¶ï¼‰å’Œäººå·¥è¯„ä¼°æ¥ç›‘æ§ç”Ÿäº§ç¯å¢ƒæ€§èƒ½ã€‚
* **ä¸­å›½äº’è”ç½‘å…¬å¸**ï¼šç™¾åº¦ã€é˜¿é‡Œã€è…¾è®¯ç­‰éƒ½åœ¨ç§¯ææ„å»ºè‡ªå®¶çš„LLMè¯„ä¼°ä½“ç³»ã€‚å…¬å¼€æŠ¥é“æ˜¾ç¤ºç™¾åº¦æ–‡å¿ƒå¤§æ¨¡å‹åœ¨å¤šé¡¹å…¬å¼€åŸºå‡†ï¼ˆå¦‚ä¸­æ–‡ç†è§£ã€QAä»»åŠ¡ç­‰ï¼‰ä¸Šè¡¨ç°ä¼˜å¼‚ï¼ˆæš—ç¤ºä¸¥æ ¼è¯„æµ‹ï¼‰ï¼ŒåŒæ—¶ç™¾åº¦æ™ºèƒ½å¯¹è¯ç³»ç»Ÿä¹Ÿé‡‡ç”¨äººå·¥æ ‡æ³¨ä¸åœ¨çº¿æ•°æ®åé¦ˆç»“åˆçš„æ–¹æ³•æ¥ä¼˜åŒ–æ¨¡å‹ã€‚é˜¿é‡Œï¼ˆå¦‚é˜¿é‡Œå°èœœå®¢æœAIï¼‰å’Œè…¾è®¯ï¼ˆå¦‚å¾®ä¿¡æ™ºèƒ½åŠ©ç†ï¼‰ä¼šé€šè¿‡ç›‘æ§å®¢æœç³»ç»Ÿçš„FCRã€å“åº”æ—¶é•¿ä»¥åŠç”¨æˆ·æ»¡æ„åº¦ç­‰æŒ‡æ ‡æ¥è¡¡é‡LLMæ”¹è¿›æ•ˆæœã€‚æ€»ä½“è€Œè¨€ï¼Œ**ç»“åˆå®æˆ˜ä¸šåŠ¡æŒ‡æ ‡ä¸è‡ªåŠ¨åŒ–è¯„æµ‹**æ˜¯å„å¤§å‚å•†çš„å…±åŒåšæ³•ï¼Œé€šè¿‡A/Bæµ‹è¯•éªŒè¯æ–°çš„LLMæ¨¡å‹æˆ–ç®—æ³•å¯¹æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡çš„å®é™…æå‡ã€‚

**æ€»ç»“**ï¼šç”Ÿäº§ç¯å¢ƒä¸‹çš„LLMè¯„ä¼°éœ€è¦è¦†ç›–ä»è¯­è¨€è´¨é‡åˆ°ä¸šåŠ¡å½±å“çš„å¤šå±‚é¢æŒ‡æ ‡ï¼Œå¹¶ç»“åˆè‡ªåŠ¨ä¸äººå·¥æ–¹æ³•ã€‚å¸¸è§åšæ³•åŒ…æ‹¬è®¾è®¡ç¬¦åˆä»»åŠ¡åˆ†å¸ƒçš„è¯„æµ‹é›†ã€çº³å…¥è¾¹ç•Œä¸å¯¹æŠ—æ€§æ¡ˆä¾‹ã€å€ŸåŠ©ä¸“ä¸šæ¡†æ¶ï¼ˆå¦‚OpenAI Evalsã€DeepEvalç­‰ï¼‰è‡ªåŠ¨åŒ–æ‰§è¡Œæµ‹è¯•ï¼Œä»¥åŠæŒç»­è·Ÿè¸ªä¸šåŠ¡KPIï¼ˆFCRã€CTRã€å­¦ä¹ æˆç»©ç­‰ï¼‰å¹¶é€šè¿‡A/Bæµ‹è¯•éªŒè¯æ¨¡å‹æ›´æ–°çš„æ•ˆæœã€‚ä¸Šè¿°å®è·µå’Œå·¥å…·é“¾ä¸ºä¼ä¸šæ„å»ºå¯æ‰©å±•ã€å¯è§£é‡Šçš„è¯„ä¼°ä½“ç³»æä¾›äº†å‚è€ƒã€‚

---
# éªŒè¯RAGäº‹å®å‡†ç¡®æ€§

éªŒè¯ **RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰** ç³»ç»Ÿä¸­ç”Ÿæˆç»“æœçš„**äº‹å®å‡†ç¡®æ€§**ï¼Œæœ¬è´¨ä¸Šæ˜¯åˆ¤æ–­ LLM æ˜¯å¦åœ¨â€œå¿ å®å¼•ç”¨â€æ‰€æ£€ç´¢åˆ°çš„çŸ¥è¯†ï¼Œé¿å…å¹»è§‰æˆ–æé€ ã€‚ä¸€ä¸ªé«˜è´¨é‡çš„éªŒè¯æœºåˆ¶åº”æ¶µç›–ä»¥ä¸‹ä¸‰ç±»æŒ‡æ ‡ä¸ç­–ç•¥ï¼š

---

### âœ… ä¸€ã€å…³é”®è¯„ä¼°ç»´åº¦ï¼ˆRAGAS/TruLensç­‰æ¡†æ¶ä¸­å¸¸ç”¨ï¼‰

| ç»´åº¦                             | è¯´æ˜                                    | å¸¸ç”¨æŒ‡æ ‡æˆ–æ–¹æ³•             |
| ------------------------------ | ------------------------------------- | ------------------- |
| **æ”¯æŒæ€§ï¼ˆFaithfulnessï¼‰**          | å›ç­”æ˜¯å¦ä¸æ£€ç´¢æ–‡æ¡£ä¸­çš„å†…å®¹ä¸€è‡´ï¼Œæ˜¯å¦äº§ç”Ÿå¹»è§‰ï¼ˆHallucinationï¼‰ | GPTè¯„åˆ†ã€ç›¸ä¼¼åº¦è®¡ç®—ã€äººå·¥éªŒè¯    |
| **ä¸Šä¸‹æ–‡ç›¸å…³æ€§ï¼ˆContext Relevanceï¼‰**  | æ£€ç´¢å†…å®¹æ˜¯å¦çœŸæ­£ä¸é—®é¢˜æœ‰å…³ï¼Œé¿å…æ— å…³æ®µè½å¹²æ‰° LLM ç”Ÿæˆ         | è¯­ä¹‰ç›¸ä¼¼åº¦ã€embedding ç›¸ä¼¼åº¦ |
| **ç­”æ¡ˆç›¸å…³æ€§ï¼ˆAnswer Relevanceï¼‰**    | ç”Ÿæˆçš„ç­”æ¡ˆæ˜¯å¦çœŸæ­£è§£å†³äº†ç”¨æˆ·çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯æ¨¡ç³Šå›ç­”             | BERTScoreã€BLEUã€äººå·¥è¯„åˆ† |
| **ç­”æ¡ˆå®Œæ•´æ€§ï¼ˆAnswer Completenessï¼‰** | ç­”æ¡ˆæ˜¯å¦è¦†ç›–äº†é—®é¢˜æ ¸å¿ƒç‚¹ï¼Œæ˜¯å¦é—æ¼äº†æ£€ç´¢æ–‡æ¡£ä¸­å…³é”®å†…å®¹           | GPTæ€»ç»“æ¯”å¯¹ã€ä¿¡æ¯è¦†ç›–ç‡       |
| **æ–‡æ¡£å¬å›ç‡ï¼ˆRecallï¼‰**              | æ˜¯å¦æœ‰æ­£ç¡®ç­”æ¡ˆçš„æ–‡æ¡£å‡ºç°åœ¨æ£€ç´¢ç»“æœä¸­                    | æ ‡å‡†QAé›†åˆå¯¹æ¯”è®¡ç®—          |

---

### ğŸ§ª äºŒã€æœ‰æ•ˆéªŒè¯æ–¹æ³•

#### æ–¹æ³• 1ï¼š**å¼•ç”¨éªŒè¯ï¼ˆCitation Groundingï¼‰**

* **æœºåˆ¶**ï¼šLLM å›ç­”ä¸­éœ€æ˜ç¡®å¼•ç”¨æ¥è‡ªå“ªä¸€æ®µ/å“ªä¸€æ¡æ£€ç´¢å†…å®¹ã€‚
* **è¯„ä¼°**ï¼š

  * äººå·¥ï¼šæ¯”å¯¹å›ç­”ä¸å¼•ç”¨æ®µæ˜¯å¦ä¸€è‡´ã€‚
  * è‡ªåŠ¨ï¼š

    * å°†å›ç­”ä¸å¼•ç”¨å†…å®¹è®¡ç®— embedding ç›¸ä¼¼åº¦ï¼ˆå¦‚ cosineï¼‰ï¼›
    * æˆ–è€…ç”¨ GPT æ¨¡å‹è¿›è¡Œâ€œæ˜¯å¦æ”¯æŒâ€åˆ¤æ–­ï¼ˆå¦‚ï¼š`Does context A support the claim in answer B?`ï¼‰ã€‚
* **å·¥å…·æ”¯æŒ**ï¼šTruLens çš„ `Groundedness feedback`ã€RAGAS çš„ `faithfulness score`ã€‚

#### æ–¹æ³• 2ï¼š**äº‹å®æ ¸æŸ¥ï¼ˆFact Checkingï¼‰**

* **ç›®æ ‡**ï¼šä»å›ç­”ä¸­æå–å‡ºä¸€ä¸ªä¸ªäº‹å®æ–­è¨€ï¼ˆclaimï¼‰ï¼Œåˆ¤æ–­æ¯æ¡æ˜¯å¦èƒ½åœ¨ context ä¸­éªŒè¯ã€‚
* **å®ç°æ–¹å¼**ï¼š

  1. æŠŠç”Ÿæˆç­”æ¡ˆåˆ‡åˆ†ä¸ºè‹¥å¹²å¥å­/å­ç»“è®ºï¼›
  2. é’ˆå¯¹æ¯ä¸ªå¥å­ï¼ŒæŸ¥è¯¢æ˜¯å¦åœ¨æ£€ç´¢æ–‡æ¡£ä¸­æœ‰ä¾æ®ï¼›
  3. ä½¿ç”¨ GPT è°ƒç”¨å¸¦ promptï¼š`Is this statement entailed by the given document?`ã€‚
* **è‡ªåŠ¨å·¥å…·**ï¼šå¯ç”¨ DeFactoã€ClaimRankã€FEVER ç­‰éªŒè¯åº“ï¼›æˆ–ç”¨ LLM åš zero-shot claim verificationã€‚

#### æ–¹æ³• 3ï¼š**é“¾å¼éªŒè¯ï¼ˆChain of Thought + Self-checkï¼‰**

* **æœºåˆ¶**ï¼šè®©æ¨¡å‹è‡ªå·±åˆ†è§£ç­”æ¡ˆã€è¿½æº¯ä¾æ®ï¼Œç±»ä¼¼â€œå¼•ç”¨é“¾â€ã€‚
* **Prompt ç¤ºä¾‹**ï¼š

  ```text
  Question: ...
  Answer: ...
  Please explain which parts of the answer are directly supported by the context and which are not.
  ```
* **ä¼˜åŠ¿**ï¼šèƒ½æ­ç¤ºå“ªäº›ç»†èŠ‚æ˜¯ç¼–é€ å‡ºæ¥çš„ï¼Œæœ‰åŠ©äºè°ƒè¯•ã€‚

#### æ–¹æ³• 4ï¼š**åå‘æ£€ç´¢éªŒè¯ï¼ˆReverse RAGï¼‰**

* **æ­¥éª¤**ï¼š

  1. è®© LLM ç”Ÿæˆå›ç­”ï¼›
  2. ç”¨å›ç­”åå‘ä½œä¸ºæŸ¥è¯¢ï¼Œçœ‹æ˜¯å¦èƒ½é‡æ–°æ£€ç´¢åˆ°åŸå§‹ contextï¼›
  3. è‹¥æ— æ³•å›æº¯ï¼Œè¯´æ˜åŸç­”æ¡ˆå¯èƒ½ä¸ºå¹»è§‰æˆ–æé€ ã€‚
* **ä¼˜ç‚¹**ï¼šè‡ªåŠ¨+é«˜å¬å›éªŒè¯ï¼Œä¸ä¾èµ–æ‰‹åŠ¨æ ‡æ³¨ã€‚

---

### ğŸ“Š ä¸‰ã€RAGè¯„ä¼°æ¨èå·¥å…·é“¾

| å·¥å…·/æ¡†æ¶         | åŠŸèƒ½ç‰¹ç‚¹                                         | ä½¿ç”¨å»ºè®®           |
| ------------- | -------------------------------------------- | -------------- |
| **RAGAS**     | å¼€ç®±å³ç”¨çš„æŒ‡æ ‡ï¼ˆFaithfulnessã€Relevanceç­‰ï¼‰ï¼ŒåŸºäºLangChain | é€‚åˆå¿«é€Ÿè¯„ä¼°æ•´ä½“è¡¨ç°     |
| **TruLens**   | æä¾›å¤šç§â€œåé¦ˆå‡½æ•°â€ï¼Œå¦‚æ”¯æŒæ€§æ£€æµ‹ã€æ¯’æ€§åˆ†æç­‰                      | é€‚åˆQAç³»ç»Ÿè¯„ä¼°       |
| **DeepEval**  | æµ‹è¯•é©±åŠ¨ã€æ”¯æŒåˆæˆæ•°æ®ç”Ÿæˆå’Œå®šåˆ¶æŒ‡æ ‡                           | æ›´é€‚åˆå¼€å‘é˜¶æ®µ        |
| **Promptfoo** | é’ˆå¯¹promptå±‚è°ƒè¯•ï¼Œä¹Ÿæ”¯æŒfact-checkæµ‹è¯•                  | é€‚åˆRAG Promptç²¾è°ƒ |

---

### ğŸ“Œ å®è·µå»ºè®®

1. **ç”Ÿæˆè¿‡ç¨‹å¯è§£é‡Š**ï¼šè®© LLM æ ‡å‡ºå…¶å¼•ç”¨çš„åŸå§‹ææ–™ï¼ˆç±»ä¼¼å¼•ç”¨ \[1]\[2] æ ¼å¼ï¼‰ï¼›
2. **é«˜å¬å›æ£€ç´¢**ï¼šç¡®ä¿æ£€ç´¢å†…å®¹åŒ…å«é—®é¢˜ç­”æ¡ˆï¼Œé¿å…å¹»è§‰ä»æ£€ç´¢é˜¶æ®µå°±å¼€å§‹ï¼›
3. **ç»“åˆGPTè¯„åˆ† + äººå·¥Spot Check**ï¼šæ¯”å¦‚æ¯ç™¾æ¡è‡ªåŠ¨æ ‡å‡ºé£é™©é«˜çš„ï¼Œäººå·¥å¤æŸ¥ï¼›
4. **æ¨¡å‹å¾®è°ƒ or RAG-fusion**ï¼šè®­ç»ƒ LLM æ›´å¿ å®äº contextï¼Œæˆ–ç”¨å¤šæ¨¡å‹æ£€æŸ¥ç»“æœä¸€è‡´æ€§ã€‚

---


## ğŸ” åå‘æ£€ç´¢éªŒè¯é€»è¾‘è¯´æ˜

**æµç¨‹å›¾**ï¼š

```
åŸå§‹é—®é¢˜ â”€â”€â–º æ£€ç´¢å™¨ â”€â”€â–º æ£€ç´¢æ®µè½ â”€â”€â–º LLM ç”Ÿæˆå›ç­”
                               â†“
                    åå‘ä½¿ç”¨å›ç­”ä½œä¸ºæŸ¥è¯¢
                               â†“
               æ£€ç´¢å™¨å†æ£€ç´¢æ˜¯å¦èƒ½å¬å›åŸæ®µè½
```

---

## ğŸ§ª ç¤ºä¾‹ä»£ç ï¼ˆåŸºäº FAISS + SentenceTransformers + GPT4All / OpenAIï¼‰

å‡è®¾ä½ å·²æœ‰ä¸€ä¸ªå‘é‡æ£€ç´¢å™¨å’ŒåŸºç¡€ RAG å®ç°ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸Šæ·»åŠ åå‘éªŒè¯ï¼š

### ğŸ”§ 1. å®‰è£…ä¾èµ–

```bash
pip install faiss-cpu sentence-transformers openai
```

### ğŸ§  2. åŸºç¡€æ£€ç´¢å™¨æ„å»º

```python
from sentence_transformers import SentenceTransformer
import faiss
import numpy as np

# åˆå§‹åŒ–æ¨¡å‹ä¸æ–‡æ¡£åº“
model = SentenceTransformer("all-MiniLM-L6-v2")  # å°æ¨¡å‹ä¹Ÿå¤Ÿç”¨
documents = [
    "å¤§ç†ŠçŒ«æ˜¯ä¸­å›½ç‰¹æœ‰çš„ç‰©ç§ï¼Œä¸»è¦åˆ†å¸ƒåœ¨å››å·ã€é™•è¥¿å’Œç”˜è‚ƒã€‚",
    "çˆ±å› æ–¯å¦æå‡ºäº†ç›¸å¯¹è®ºï¼Œå…¶ä¸­åŒ…æ‹¬ç‹­ä¹‰ç›¸å¯¹è®ºå’Œå¹¿ä¹‰ç›¸å¯¹è®ºã€‚",
    "ä¸Šæµ·æ˜¯ä¸­å›½çš„ç»æµä¸­å¿ƒä¹‹ä¸€ï¼Œæ‹¥æœ‰ç¹è£çš„é‡‘èä¸šã€‚"
]

# æ„å»ºå‘é‡åº“
doc_embeddings = model.encode(documents, normalize_embeddings=True)
index = faiss.IndexFlatIP(doc_embeddings.shape[1])
index.add(doc_embeddings)
```

---

### ğŸ¤– 3. æ¨¡æ‹Ÿé—®ç­” + åå‘éªŒè¯é€»è¾‘

```python
def rag_generate_answer(question: str) -> str:
    # æ­£å‘æ£€ç´¢
    q_emb = model.encode([question], normalize_embeddings=True)
    _, indices = index.search(q_emb, k=1)
    top_doc = documents[indices[0][0]]
    
    # ç®€åŒ–LLMè°ƒç”¨ï¼ˆå®é™…ç”¨OpenAI/GPTå¯æ›¿æ¢ï¼‰
    if "çˆ±å› æ–¯å¦" in question:
        return "çˆ±å› æ–¯å¦æå‡ºäº†ç‹­ä¹‰ç›¸å¯¹è®ºå’Œå¹¿ä¹‰ç›¸å¯¹è®ºã€‚"
    elif "ç†ŠçŒ«" in question:
        return "å¤§ç†ŠçŒ«ä¸»è¦ç”Ÿæ´»åœ¨å››å·å’Œé™•è¥¿ã€‚"
    else:
        return "å¯¹ä¸èµ·ï¼Œæˆ‘æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚"

def reverse_rag_validation(answer: str, top_k: int = 3) -> bool:
    ans_emb = model.encode([answer], normalize_embeddings=True)
    _, indices = index.search(ans_emb, k=top_k)
    retrieved_docs = [documents[i] for i in indices[0]]
    
    print("ğŸ” åå‘æ£€ç´¢å‘½ä¸­æ–‡æ¡£ï¼š", retrieved_docs)
    
    for doc in retrieved_docs:
        if answer.lower()[:20] in doc.lower():  # ç²—ç•¥åˆ¤æ–­ï¼Œå¯ä»¥ç”¨GPTåš entailment æ£€æŸ¥
            return True
    return False
```

---

### âœ… 4. æµ‹è¯•è¿è¡Œ

```python
q = "çˆ±å› æ–¯å¦çš„ç†è®ºæœ‰å“ªäº›ï¼Ÿ"
answer = rag_generate_answer(q)

print("ğŸ“Œ åŸé—®é¢˜ï¼š", q)
print("ğŸ“š å›ç­”ï¼š", answer)

valid = reverse_rag_validation(answer)
print("âœ… æ˜¯å¦æ£€ç´¢å›åŸæ–‡ï¼Ÿ", "æ˜¯" if valid else "å¦ï¼ˆå¯èƒ½å­˜åœ¨å¹»è§‰ï¼‰")
```

---

## ğŸ“ˆ è¾“å‡ºç¤ºä¾‹ï¼š

```
ğŸ“Œ åŸé—®é¢˜ï¼š çˆ±å› æ–¯å¦çš„ç†è®ºæœ‰å“ªäº›ï¼Ÿ
ğŸ“š å›ç­”ï¼š çˆ±å› æ–¯å¦æå‡ºäº†ç‹­ä¹‰ç›¸å¯¹è®ºå’Œå¹¿ä¹‰ç›¸å¯¹è®ºã€‚
ğŸ” åå‘æ£€ç´¢å‘½ä¸­æ–‡æ¡£ï¼š ['çˆ±å› æ–¯å¦æå‡ºäº†ç›¸å¯¹è®ºï¼Œå…¶ä¸­åŒ…æ‹¬ç‹­ä¹‰ç›¸å¯¹è®ºå’Œå¹¿ä¹‰ç›¸å¯¹è®ºã€‚', ...]
âœ… æ˜¯å¦æ£€ç´¢å›åŸæ–‡ï¼Ÿ æ˜¯
```

---

## ğŸ“Œ è¡¥å……å»ºè®®

* å¯¹äºç”Ÿæˆç­”æ¡ˆæ˜¯æ‘˜è¦å‹ã€è¯­ä¹‰é‡æ„å‹çš„ï¼Œå¯ç»“åˆ LLM è¿›ä¸€æ­¥åˆ¤æ–­è¯­ä¹‰ä¸€è‡´æ€§ï¼ˆç”¨ GPT promptï¼š`Does document A support statement B?`ï¼‰ã€‚
* å¯ä»¥å°†åå‘éªŒè¯ç»“æœæ‰“åˆ†åŒ–ï¼ˆä¾‹å¦‚ `score = cosine(answer, top_doc)`ï¼‰ç”¨ä½œ QA pipeline çš„ reranking æˆ–è¿‡æ»¤å™¨ã€‚

---
